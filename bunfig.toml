# Workspace configuration
# Tests live in packages/*/tests/ and are run with:
#   bun test packages/core/tests/
#   bun test packages/node/tests/
#   bun test (all packages)

[test]
# Limit test discovery to packages/ to exclude the effect/ reference codebase
root = "packages"

# Coverage configuration (only used when --coverage flag is passed)
coverageReporter = ["text", "lcov"]
coverageDir = "coverage"
coverageSkipTestFiles = true
coveragePathIgnorePatterns = [
  "**/tests/**",     # Test directories
  "examples/**",     # Example code
  "effect/**",       # Vendored Effect reference codebase
  "**/index.ts",     # Barrel files (re-exports only)
  "**/*.d.ts",       # Type declaration files
]

# Coverage thresholds based on baseline measurement (task 1.1):
# - Functions: 82.68% → threshold 82%
# - Lines: 85.44% → threshold 84% (using 84% to accommodate minor fluctuation)
# Rounded down to nearest integer to allow minor fluctuation without false failures
coverageThreshold = { functions = 0.82, lines = 0.84 }
